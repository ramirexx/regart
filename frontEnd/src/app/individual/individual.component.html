<h4 class="page-title txt-color-blueDark">
        <i class="fa-fw fa fa-user"></i> 
            REGISTRO INDIVIDUAL 
        <span>>  
                  Ficha de Registro
        </span>
   </h4>
<div class="col-md-12">
    <!--<nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/tipo-registro">Inicio</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">REGISTRO COLECTIVO / Ficha de Registro</li>
        </ol>
    </nav>-->
    <form [formGroup]="artForm" novalidate>
        
            <fieldset>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Número de Registro </label>
                            <input type="text" class="form-control" [formControl]="artForm.controls['numero_registro']" [(ngModel)]="artista.numero_registro"
                                maxlength="36" />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Estado del Registro</label>
                            <input type="text" class="form-control" [formControl]="artForm.controls['id_estado']" [(ngModel)]="artista.id_estado" maxlength="36"
                            />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <label>Fecha de registro</label>
                        <p-calendar [(ngModel)]="artista.d_fecha_registro" [formControl]="artForm.controls['d_fecha_registro']" dateFormat="dd/mm/yy"
                            inputStyleClass="form-control" placeholder="dd/mm/yyyy" [locale]="es"></p-calendar>
                    </div>
                    <div class="col-sm-3" *ngIf="renovacion">
                        <label>Fecha de renovacion</label>
                        <p-calendar [(ngModel)]="artista.d_fecha_renovacion" [formControl]="artForm.controls['d_fecha_renovacion']" dateFormat="dd/mm/yy"
                            inputStyleClass="form-control" placeholder="dd/mm/yyyy" [locale]="es"></p-calendar>
                    </div>
                    <!--<div class="col-sm-3">
                        <label>Vigencia</label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['vigencia']" [(ngModel)]="artista.vigencia"
                                maxlength="36" />
                    </div>-->

                </div>
                <div class="row">
                    <!--<div class="col-sm-3">
                        <label>Tipo de Registro </label>
                        <select class="form-control" [formControl]="artForm.controls['estado_credencial']" [(ngModel)]="artista.estado_credencial">
                            <option *ngFor="let obj of estadosCredencial" [ngValue]="obj">{{obj}}</option>
                        </select>
                    </div>-->
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Residencia</label>
                            <select class="form-control" [formControl]="artForm.controls['residencia']" [(ngModel)]="artista.residencia">
                                <option *ngFor="let obj of departamentos" [ngValue]="obj.descripcion">{{obj.descripcion}}</option>
                            </select>
                            
                        </div>
                    </div>
                    <!--<div class="col-sm-3">
                        <div class="form-group">
                            <label>Identidad</label>
                            <select class="form-control" [formControl]="artForm.controls['comunidad']" [(ngModel)]="artista.comunidad">
                                <option *ngFor="let obj of comunidades" [ngValue]="obj.comunidad">{{obj.comunidad}}</option>
                            </select>

                        </div>
                    </div>-->
                </div>
                <br>
            </fieldset>
            <p-panel header="Lugar de Registro">
            <fieldset>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Departamento</label>
                            <select class="form-control" [formControl]="artForm.controls['id_dpto']" [(ngModel)]="artista.id_dpto" 
                            (ngModelChange)="onselectDepartamento($event)">
                                <option *ngFor="let obj of departamentos" [ngValue]="obj.codigo">{{obj.descripcion}}</option>
                            </select>

                        </div>
                    </div>
                    <div class="col-sm-3">
                        <label>Provincia </label>
                        <!--<select class="form-control" [formControl]="artForm.controls['d_provincia']" [(ngModel)]="artista.id_prov"
                        (ngModelChange)="onselectMunicipio($event, obj)">
                            <option *ngFor="let obj of provincias" [ngValue]="obj.DepProv">{{obj.Provincia}}</option>
                        </select>-->
                        <select class="form-control" [formControl]="artForm.controls['d_provincia']" [(ngModel)]="provincia"
                        (ngModelChange)="onselectMunicipio($event)">
                            <option *ngFor="let obj of provincias" [ngValue]="obj">{{obj.Provincia}}</option>
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Municipio </label>
                            <select class="form-control" [formControl]="artForm.controls['d_municipio']" [(ngModel)]="artista.id_mun">
                            <option *ngFor="let obj of municipios" [ngValue]="obj.codigo">{{obj.descripcion}}</option>
                        </select>
                        </div>
                    </div>
                    <!--<div class="col-sm-3">
                    <div class="form-group">
                        <label>Comunidad / Nación</label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_comunidad']" [(ngModel)]="artista.d_comunidad"
                            maxlength="36" />
                    </div>
                </div>-->
                </div>
            </fieldset>
        </p-panel>
        <p-panel header="Datos Personales">
            <fieldset>
                <div class="row">
                        <div class="col-sm-3">
                                <label>Nombre Artistico</label>
                                <input type="text" class="form-control" [formControl]="artForm.controls['nombre_artistico']" [(ngModel)]="artista.d_nombre_artistico"
                                    maxlength="36" />
                            </div>
                    <div class="col-sm-3">
                        <label>Cedula de identidad</label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_cedula']" [(ngModel)]="artista.d_cedula"
                            maxlength="36" />
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Lugar de expedicion</label>
                            <select class="form-control" [formControl]="artForm.controls['d_exp']" [(ngModel)]="artista.d_exp">
                                <option *ngFor="let obj of departamentos" [ngValue]="obj.codigo">{{obj.descripcion}}</option>
                            </select>

                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Sexo</label>
                            <select class="form-control" [formControl]="artForm.controls['d_sexo']" [(ngModel)]="artista.d_sexo">
                                <option *ngFor="let obj of generos" [ngValue]="obj">{{obj}}</option>
                            </select>

                        </div>
                    </div>
                    
                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Nombres</label>
                            <input type="text" class="form-control" [formControl]="artForm.controls['d_nombres']" [(ngModel)]="artista.d_nombres" maxlength="36"
                            />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Apellidos</label>
                            <input type="text" class="form-control" [formControl]="artForm.controls['d_apellidos']" [(ngModel)]="artista.d_apellidos"
                                maxlength="36" />
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Lugar de Nacimiento</label>
                            <select class="form-control" [formControl]="artForm.controls['d_nacimiento']" [(ngModel)]="artista.d_nacimiento">
                                <option *ngFor="let obj of departamentos" [ngValue]="obj.codigo">{{obj.descripcion}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <label>Fecha de nacimiento</label>
                        <p-calendar [(ngModel)]="artista.d_fecha_nacimiento" [formControl]="artForm.controls['d_fecha_nacimiento']" dateFormat="dd/mm/yy"
                            inputStyleClass="form-control" placeholder="dd/mm/yyyy" [locale]="es"></p-calendar>
                            
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Estado civil</label>
                            <select class="form-control" [formControl]="artForm.controls['d_estado_civil']" [(ngModel)]="artista.d_estado_civil">
                                <option *ngFor="let obj of estadoCivil" [ngValue]="obj">{{obj}}</option>
                            </select>
                            <!--<input type="text" class="form-control" [formControl]="artForm.controls['d_estado_civil']" [(ngModel)]="artista.d_estado_civil"
                                maxlength="36" />-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Nº Hijos</label>
                            <select class="form-control" [formControl]="artForm.controls['d_nro_hijos']" [(ngModel)]="artista.d_nro_hijos">
                                <option *ngFor="let obj of hijos" [ngValue]="obj">{{obj}}</option>
                            </select>
                            <!--<input type="text" class="form-control" [formControl]="artForm.controls['d_nro_hijos']" [(ngModel)]="artista.d_nro_hijos"
                                maxlength="36" />-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Otra Profesión </label>
                            <select class="form-control" [formControl]="artForm.controls['d_profesion']" [(ngModel)]="artista.d_profesion">
                                <option *ngFor="let obj of profesiones" [ngValue]="obj">{{obj.profesion}}</option>
                            </select>
                            <!--<input type="text" class="form-control" [formControl]="artForm.controls['d_profesion']" [(ngModel)]="artista.d_profesion"
                                maxlength="36" />-->
                        </div>
                    </div>
                </div>
            </fieldset>
        </p-panel>
        <p-panel header="Datos del Contacto">
            <fieldset>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Domicilio actual </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_domicilio']" [(ngModel)]="artista.d_domicilio"
                            maxlength="250" />
                    </div>
                    <div class="col-sm-4">
                        <label>Número de telefono fijo </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_telefono']" [(ngModel)]="artista.d_telefono" maxlength="36"
                        />
                    </div>
                    <div class="col-sm-4">
                        <label>Número de celular </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_celular']" [(ngModel)]="artista.d_celular" maxlength="36"
                        />
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Correo electrónico </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_email']" [(ngModel)]="artista.d_email" maxlength="36"
                        />
                    </div>
                    <div class="col-sm-4">
                        <label>Página Web </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_pagina_web']" [(ngModel)]="artista.d_pagina_web"
                            maxlength="36" />
                    </div>
                    <div class="col-sm-4">
                        <label>Yotube Blog </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_youtube']" [(ngModel)]="artista.d_youtube" maxlength="36"
                        />
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Facebook </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_otros']" [(ngModel)]="artista.d_otros" maxlength="36"
                        />
                    </div>
                </div>

            </fieldset>
        </p-panel>
        <p-panel header="Datos Artisticos">
            <fieldset>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Sindicato / Asociación </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_institucion']" [(ngModel)]="artista.d_institucion"
                            maxlength="36" />
                    </div>
                    <!--<div class="col-sm-4">
                        <label>Agrupación </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_agrupaciones']" [(ngModel)]="artista.d_agrupaciones"
                            maxlength="36" />
                    </div>-->
                    <div class="col-sm-4">
                        <label>Sector </label>
                        <select class="form-control" [formControl]="artForm.controls['id_sector']" [(ngModel)]="artista.id_sector"
                        (ngModelChange)="onselectSector($event)">
                            <option *ngFor="let obj of categorias" [ngValue]="obj.id_cat">{{obj.d_desc_cat}}</option>
                        </select>
                    </div>
                    
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <label>Sub Sector </label>
                        <select class="form-control" [formControl]="artForm.controls['id_sub_sector']" [(ngModel)]="artista.id_sub_sector"
                        (ngModelChange)="onselectSubSector($event)">
                        <option value="">--Seleccione un valor--</option>      
                            <option *ngFor="let obj of subSector" [ngValue]="obj.id_sub_cat">{{obj.d_desc_sub_cat}}</option>
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <label>Actividad Principal</label>
                     
                        <select class="form-control" [formControl]="artForm.controls['id_actividad']" [(ngModel)]="artista.id_actividad"
                        (ngModelChange)="onselectActividad($event)">
                        <option value="">--Seleccione un valor--</option>      
                            <option *ngFor="let obj of actividad" [ngValue]="obj.id_actividad">{{obj.d_desc_act}}</option>
                        </select>
                    </div>
                    <div class="col-sm-4">
                            <label>Actividad Secundaria</label>
                            <select class="form-control" [formControl]="artForm.controls['id_actividad_sec']" [(ngModel)]="artista.actividad_sec"
                            >
                            <option value="">--Seleccione un valor--</option>      
                                <option *ngFor="let obj of actividadSec" [ngValue]="obj.d_desc_act">{{obj.d_desc_act}}</option>
                            </select>
                        </div>
                    
                </div>
                <div class="row">
                        <div class="col-sm-4">
                                <label>Especialidad Principal</label>
                                <select class="form-control" [formControl]="artForm.controls['id_especialidad']" [(ngModel)]="artista.id_especialidad">
                                        <option value="">--Seleccione un valor--</option>      
                                    <option *ngFor="let obj of especialidad" [ngValue]="obj.id_especialidad">{{obj.d_desc_esp}}</option>
                                    </select>
                            </div>
                            <div class="col-sm-4">
                                    <label>Especialidad Secundaria </label>
                                    <select class="form-control" [formControl]="artForm.controls['id_especialidad_sec']" [(ngModel)]="artista.id_especialidad_sec">
                                            <option value="">--Seleccione un valor--</option>  
                                            <option *ngFor="let obj of especialidad" [ngValue]="obj.id_especialidad">{{obj.d_desc_esp}}</option>
                                        </select>
                                </div>
                                <div class="col-sm-4">
                                        <label>Especialidad Terciaria </label>
                                        
                                        <select class="form-control" [formControl]="artForm.controls['id_especialidad_ter']" [(ngModel)]="artista.id_especialidad_ter">
                                                <option value="">--Seleccione un valor--</option>  
                                            <option *ngFor="let obj of especialidad" [ngValue]="obj.id_especialidad">{{obj.d_desc_esp}}</option>
                                            </select>
                                    </div>
                </div>
                


                <div class="row">
                        <div class="col-md-4" *ngIf="rol !='4'">
                                <label>Categorizacion </label>
                                <select class="form-control" [formControl]="artForm.controls['categorizacion']" [(ngModel)]="artista.categorizacion">
                                    <option *ngFor="let obj of listaCategorizacion" [ngValue]="obj">{{obj}}</option>
                                </select>
                            </div>
                    <div class="col-md-4">
                        <br>
                        <button pButton type="button" label="Registrar Experiencia" icon="fa-save" (click)="showDialog()"></button>
                        <!--<label>Experiencia </label>
                        <input type="text" class="form-control" [formControl]="artForm.controls['d_experiencia']" [(ngModel)]="artista.d_experiencia"
                            maxlength="36" />-->
                    </div>
                    
                
                </div>
            </fieldset>
        </p-panel>
        <p-panel header="Archivos Digitales">
            <fieldset>
                <div class="row">
                    <div class="col-sm-6">
                        <label>Fotografia para Credencial </label>
                        <input type="file" id="filePicker" (change)="handleFileSelect($event)" [formControl]="artForm.controls['d_foto_individual']">
                    </div>
                    <div class="col-sm-6">
                        <img *ngIf="base64Foto" [src]="'data:image/jpg;base64,'+base64Foto" width="200px"/>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-6">
                        <label>Fotografia de Perfil  </label>
                        <input type="file" id="filePicker" (change)="handleFileSelect2($event)" [formControl]="artForm.controls['d_foto_artista']">
                    </div>
                    <div class="col-sm-6">
                        <img *ngIf="base64FotoPerfil" [src]="'data:image/jpg;base64,'+base64FotoPerfil" width="300px"/>
                    </div>
                </div>
            </fieldset>
        </p-panel>
    </form>
</div>
<br>
<div class="col-md-12">
    <p-toolbar>
        <div class="ui-toolbar-group-right">
            <button pButton type="button" label="Guardar" icon="fa-save" (click)="saveDraft()"></button>
            <button pButton type="button" label="Volver" icon="fa-times"(click)="cancel()"></button>
        </div>

        <!--<button type="button" pButton (click)="showSuccess()" label="Success" class="ui-button-success"></button>
        <button type="button" pButton (click)="showError()" label="Error" class="ui-button-danger"></button>-->
    </p-toolbar>
</div>


<p-dialog [(visible)]="display" [width]="740" [height]="600" modal="true" [closable]="false">
        <p-header>
                Registro de Hoja Artistica
            </p-header>
            <app-hoja-de-vida [master]="artista.id_individual" 
            [tipo]="tipoForm">
            </app-hoja-de-vida>
            <p-footer>
                    <!--<button pButton type="button" label="Aceptar" icon="fa-save" (click)="saveDraft()"></button>-->
                    <button pButton type="button" label="Cerrar" icon="fa-times"(click)="closeDialog()"></button>
            </p-footer>
</p-dialog>

<p-growl [(value)]="msgs"></p-growl>


<!--{{artista.ci_usuario}}-->


<!--<pre>{{artista | json}}</pre>-->